// Backbone.Syphon, v0.2.0-pre
// Copyright (c)2012 Derick Bailey, Muted Solutions, LLC.
// Distributed under MIT license
// http://github.com/derickbailey/backbone.syphon
(function(a,b){typeof define=="function"&&define.amd&&define(["_","jQuery","Backbone"],b)})(this,function(a,b,c){return c.Syphon=function(a,b,c){var d={};d.ignoredTypes=["button","submit","reset"],d.serialize=function(a,g){var h={};g=c.clone(g)||{},g.ignoredTypes=c.clone(d.ignoredTypes);var i=e(a,g);return c.each(i,function(a){var c=b(a),e=f(c),g=d.InputReaders.get(e),i=g(c),j=d.KeyExtractors.get(e),k=j(c),l=d.KeyAssignmentValidators.get(e);l(c,k,i)&&(h[k]=i)}),h},d.TypeRegistry=function(){this.registeredTypes={}},d.TypeRegistry.extend=a.Model.extend,c.extend(d.TypeRegistry.prototype,{get:function(a){var b=this.registeredTypes[a];return b||(b=this.registeredTypes["default"]),b},register:function(a,b){this.registeredTypes[a]=b},registerDefault:function(a){this.registeredTypes["default"]=a},unregister:function(a){this.registeredTypes[a]&&delete this.registeredTypes[a]}}),d.KeyExtractorSet=d.TypeRegistry.extend(),d.KeyExtractors=new d.KeyExtractorSet,d.KeyExtractors.registerDefault(function(a){return a.prop("name")}),d.InputReaderSet=d.TypeRegistry.extend(),d.InputReaders=new d.InputReaderSet,d.InputReaders.registerDefault(function(a){return a.val()}),d.InputReaders.register("checkbox",function(a){var b=a.prop("checked");return b}),d.KeyAssignmentValidatorSet=d.TypeRegistry.extend(),d.KeyAssignmentValidators=new d.KeyAssignmentValidatorSet,d.KeyAssignmentValidators.registerDefault(function(){return!0}),d.KeyAssignmentValidators.register("radio",function(a,b,c){return a.prop("checked")});var e=function(a,e){var g=a.$("form")[0],h=g.elements;return h=c.reject(h,function(a){var g,h=f(a),i=d.KeyExtractors.get(h),j=i(b(a)),k=c.include(e.ignoredTypes,h),l=c.include(e.include,j),m=c.include(e.exclude,j);return l?g=!1:e.include?g=!0:g=m||k,g}),h},f=function(a){var c,d=b(a),e=d[0].tagName,f=e;return e.toLowerCase()==="input"&&(c=d.attr("type"),c?f=c:f="text"),f.toLowerCase()};return d}(c,b,a),c.Syphon});